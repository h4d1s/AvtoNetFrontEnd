<div class="container">
    <form class="row g-3" [formGroup]="listingAddForm" (ngSubmit)="onSubmit()">
        <div class="alert alert-success" role="alert" *ngIf="successfulMessage">
            {{ successfulMessage }}
        </div>
        <div class="alert alert-success" role="alert" *ngIf="errorMessage">
            {{ errorMessage }}
        </div>
        <div class="col-12">
            <h1>Add new listing</h1>
        </div>

        <div class="col-12">
            <label for="images" class="form-label">Image</label><br />
            <input type="file" accept="image/*" #fileInput (change)="onFileSelected($event)" formControlName="imageFile" class="mb-3">
            <div class="image-preview" *ngIf="imageFilePath">
                <img [src]="imageFilePath" alt="Image Preview" class="img-fluid" width="120" />
                <button type="button" (click)="removeImage()" class="btn btn-sm btn-primary ms-2">Remove</button>
            </div>
        </div>
        <div class="col-6">
            <label for="color" class="form-label">Brand</label>
            <select class="form-select" formControlName="brandId" aria-label="Brand select" (change)="onBrandSelectChange($event)">
                <option *ngFor="let brand of brands" [value]="brand.id">{{ brand.name }}</option>
            </select>
        </div>
        <div class="col-6">
            <label for="color" class="form-label">Model</label>
            <select class="form-select" formControlName="modelId" aria-label="Model select">
                <option *ngFor="let model of models" [value]="model.id">{{ model.name }}</option>
            </select>
        </div>
        <div class="col-md-6">
            <label for="mileage" class="form-label">Mileage</label>
            <input type="text" class="form-control" id="mileage" name="mileage" formControlName="mileage">
        </div>
        <div class="col-md-6">
            <label for="fuelType" class="form-label">Fuel Type</label>
            <select class="form-select" formControlName="fuelType" aria-label="Fuel type select">
                <option value="diesel">Diesel</option>
                <option value="gasoline">Gasoline</option>
            </select>
        </div>
        <div class="col-6">
            <label for="gearbox" class="form-label">Gearbox</label>
            <select class="form-select" formControlName="gearbox" aria-label="Gearbox select">
                <option value="automatic">Automatic</option>
                <option value="manual">Manual</option>
            </select>
        </div>
        <div class="col-6">
            <label for="yearOfProduction" class="form-label">Year of production</label>
            <input type="text" class="form-control" id="yearOfProduction" formControlName="yearOfProduction">
        </div>
        <div class="col-6">
            <label for="color" class="form-label">Color</label>
            <select class="form-select" formControlName="color" aria-label="Color select">
                <option value="blue">Blue</option>
                <option value="brown">Brown</option>
                <option value="bronze">Bronze</option>
                <option value="yellow">Yellow</option>
                <option value="grey">Grey</option>
                <option value="green">Green</option>
                <option value="red">Red</option>
                <option value="black">Black</option>
                <option value="silver">Silver</option>
                <option value="violet">Violet</option>
                <option value="white">White</option>
                <option value="orange">Orange</option>
                <option value="gold">Gold</option>
            </select>
        </div>
        <div class="col-md-6">
            <label for="price" class="form-label">Price</label>
            <input type="text" class="form-control" id="price" formControlName="price">
        </div>
        <div class="col-md-6">
            <label for="power" class="form-label">Power</label>
            <input type="text" class="form-control" id="power" formControlName="power">
        </div>
        <div class="col-md-6">
            <label for="engineSize" class="form-label">Engine size</label>
            <input type="text" class="form-control" id="engineSize" formControlName="engineSize">
        </div>
        <div class="col-12">
            <button type="submit" class="btn btn-primary" [disabled]="!listingAddForm.valid">Save</button>
        </div>
    </form>
</div>
